<%= content_for(:title) { "Edit #{@user.email}" } %>

<%= content_for :header do %>
  <h1 class="header__title">Edit <%= @user.email %></h1>

  <div class="clearfix"></div>
<% end %>

<div class="row">
  <div class="col-sm-6 col-md-6 mb-4">
    <%= vertical_form_with(model: @user, method: :put) do |f| %>
      <div class="card">
        <div class="card-body">

          <div class="mb-3">
            <%= f.label :username, class: "form-label" %>
            <%= f.text_field :username, class: 'form-control', autofocus: true, autocomplete: "username" %>
          </div>

          <div class="mb-3 form-check">
            <% role_names = User.roles.keys %>
            <%= f.check_box :role, { class: "form-check-input" }, role_names.last, role_names.first %>
            <%= f.label :role, class: "form-check-label" do %>
              Admin
              <span
                data-bs-toggle="tooltip"
                data-bs-title="Admins can manage and invite users"
              ><i class="bi bi-question-circle" aria-label="helper text"></i>
            <% end %>
          </div>

          <div class="mb-3 form-check">
            <%= f.check_box :enforce_two_factor, { class: "form-check-input" } %>
            <%= f.label :enforce_two_factor, class: "form-check-label" do %>
              Enforce 2FA
              <span
                data-bs-toggle="tooltip"
                data-bs-title="The user will be forced to setup and use 2FA to sign in."
              ><i class="bi bi-question-circle" aria-label="helper text"></i>
            <% end %>
          </div>

          <div class="actions">
            <%= f.submit "Update", class: 'btn btn-primary' %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
